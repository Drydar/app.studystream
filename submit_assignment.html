<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FUTO</title>
    <link rel="stylesheet" href="assignment.css">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
        <div class="intro">
            <h1>STREAMPLEX</h1>
        </div>
        <div class="top">
            <h3>Send your Assignments</h3>
            <div class="next">
                <p>Minimum Price: &#8358;400</p>
                <p>Maximum Price: .....</p>
            </div>
        </div>

        <div class="container">
            <form id="myForm" class="form-section">
                <input type="text" id="name" placeholder="Full Name" required><br>
                <input type="number" id="whatsappNumber" placeholder="WhatsApp Number" required><br>
                <input type="text" id="courseCode" placeholder="Course Code" required><br>
                <input type="text" id="instruction" placeholder="Any specific requirements?"><br>
                <button type="submit">Submit Request</button>
            </form>
            
            <div id="popup" class="popup">
                <p>Request sent successfully!<br>Expect an agent on WhatsApp before making Payment</p>
            </div>
            <script>
                (function() {
                    emailjs.init("ereOOE-SViWJwwW7w"); // Your EmailJS Public Key
                })();

                document.getElementById("myForm").addEventListener("submit", function(event) {
                    event.preventDefault();

                    let serviceID = "service_ue6pkhf";  
                    let templateID = "template_fojt69l"; 

                    let recipientEmails = [
                        "streamplexcc@gmail.com",
                        "d.rydar001@gmail.com",
                        "bbfboss2003@gmail.com"
                    ];

                    let messageContent = `
                        ðŸ”¹ASSIGNMENT REQUESTðŸ”¹
                        Full Name: ${document.getElementById("name").value}
                        WhatsApp Number: ${document.getElementById("whatsappNumber").value}
                        Course Code: ${document.getElementById("courseCode").value}
                        Instruction: ${document.getElementById("instruction").value}
                    `;

                    recipientEmails.forEach(email => {
                        let params = { to_email: email, message: messageContent };

                        emailjs.send(serviceID, templateID, params)
                            .then(response => {
                                console.log(`Email sent to ${email}`);
                            })
                            .catch(error => {
                                console.error(`Failed to send email to ${email}`, error);
                            });
                    });

                    showPopup();
                });

                function showPopup() {
                    let popup = document.getElementById("popup");
                    popup.style.display = "block";
                    setTimeout(() => {
                        popup.style.display = "none";
                        location.reload();
                    }, 3500);
                }
            </script>
        </div>





        <div class="payment">
            <style>
                body {
                    font-family: 'Sans';
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                    background-color: #f4f4f4;
                    flex-direction: column;
                    position: relative;
                }
        
                .payment-container {
                    position: relative;
                    text-align: center;
                }
        
                .payment-button {
                    background-color: #007bff;
                    color: white;
                    padding: 15px 30px;
                    border: none;
                    cursor: pointer;
                    border-radius: 5px;
                    font-size: 18px;
                    transition: all 0.4s ease-in-out;
                }
        
                .expanded {
                    width: 300px;
                    height: auto;
                    padding: 20px;
                    background-color: white;
                    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
                    border-radius: 10px;
                    position: absolute;
                    top: 0;
                    left: 50%;
                    transform: translateX(-50%);
                    opacity: 0;
                    visibility: hidden;
                    transition: all 0.4s ease-in-out;
                }
        
                .show {
                    opacity: 1;
                    visibility: visible;
                    transform: translateX(-50%) translateY(10px);
                }
        
                .close-btn {
                    background: red;
                    color: white;
                    border: none;
                    padding: 8px 15px;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 14px;
                    margin-top: 10px;
                    transition: background 0.3s;
                }
        
                .close-btn:hover {
                    background: darkred;
                }
        
                .account {
                    background-color: #f1f1f1;
                    padding: 10px;
                    margin: 10px 0;
                    border-radius: 5px;
                    cursor: pointer;
                    transition: background 0.3s;
                }
        
                .account:hover {
                    background-color: #ddd;
                }
        
                .complete-btn {
                    background: green;
                    color: white;
                    border: none;
                    padding: 10px 15px;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 14px;
                    margin-top: 10px;
                    transition: background 0.3s;
                }
        
                .complete-btn:hover {
                    background: darkgreen;
                }
        
                .bank-btn {
                    background: blue;
                    color: white;
                    border: none;
                    padding: 10px;
                    border-radius: 5px;
                    cursor: pointer;
                    font-size: 14px;
                    width: 100%;
                    margin: 5px 0;
                    transition: background 0.3s;
                }
        
                .bank-btn:hover {
                    background: darkblue;
                }
        
                .awaiting {
                    font-size: 15px;
                    font-weight: bold;
                    color: orange;
                    margin-top: 10px;
                }
        
                .popup {
                    position: fixed;
                    bottom: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background-color: rgba(0, 0, 0, 0.8);
                    color: white;
                    padding: 10px 20px;
                    border-radius: 5px;
                    opacity: 0;
                    visibility: hidden;
                    transition: opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
                }
        
                .popup.show-popup {
                    opacity: 1;
                    visibility: visible;
                }
            </style>

            <!-- Popup Notification -->
            <div class="popup" id="PopupMessage"></div>

            <div class="payment-container">
                <button class="payment-button" onclick="togglePayment()">Make Payment</button>
                
                <div class="expanded" id="paymentBox">
                    <p>Account Name:<br>Emmanuel Ogbonnaya .I.</p>
                    <h4>Click account number to copy</h4>
                    <div class="account" onclick="copyToClipboard('1220195383')">Access Bank - 1220195383</div>
                    <div class="account" onclick="copyToClipboard('8087531298')">Opay (PayCom) - 8087531298</div>
                    <button class="complete-btn" onclick="showBankOptions()">Payment Complete</button>
                    <button class="close-btn" onclick="togglePayment()">Close</button>
                </div>
            
                <div class="expanded" id="bankOptions">
                    <h3>Select Bank Paid To</h3>
                    <button class="bank-btn" onclick="confirmPayment('Access Bank')">Access Bank</button>
                    <button class="bank-btn" onclick="confirmPayment('Opay')">Opay</button>
                    <button class="close-btn" onclick="togglePayment()">Close</button>
                </div>
            </div>

            <script>
                function togglePayment() {
                    const paymentBox = document.getElementById("paymentBox");
                    const bankOptions = document.getElementById("bankOptions");
            
                    if (paymentBox.classList.contains("show")) {
                        paymentBox.classList.remove("show");
                        bankOptions.classList.remove("show");
                    } else {
                        paymentBox.classList.add("show");
                    }
                }
            
                function copyToClipboard(accountNumber) {
                    navigator.clipboard.writeText(accountNumber).then(() => {
                        showPopup("Copied account number: " + accountNumber);
                    });
                }
            
                function showBankOptions() {
                    document.getElementById("paymentBox").classList.remove("show");
                    document.getElementById("bankOptions").classList.add("show");
                }
            
                function confirmPayment(bankName) {
                    const bankOptions = document.getElementById("bankOptions");
                    bankOptions.innerHTML = `<p class="awaiting">Awaiting Confirmation for ${bankName}...<br>Expect a reply from us</p>`;
            
                    emailjs.init("ereOOE-SViWJwwW7w"); // Initialize EmailJS
            
                    emailjs.send("service_ue6pkhf", "template_fojt69l", {
                        message: `A user has completed a payment to ${bankName}!`,
                        user_email: "streamplexcc@gmail.com, nwachukwunneoma47@gmail.com",
                    }).then(() => {
                        showPopup(`Payment to ${bankName} is awaiting confirmation. Expect a reply from us`);
            
                        // Wait 2 seconds, then reload page
                        setTimeout(() => {
                            location.reload();
                        }, 2000);
            
                    }).catch(error => {
                        console.error("EmailJS Error:", error);
                        showPopup("Failed.");
                    });
                }
            
                function showPopup(message) {
                    const popup = document.getElementById("popupMessage");
                    popup.innerText = message;
                    popup.classList.add("show-popup");
            
                    setTimeout(() => {
                        popup.classList.remove("show-popup");
                    }, 3000);
                }
            </script>
        </div> 
</body>

<div class="bottom-navigation">
    <style>
        #nav__2 {
            width: 45px;
            height: 44px;
            background-color: rgb(241, 203, 131);
            border-radius: 50%;
            padding: 8px;
            padding-top: 10px;
            justify-content: center;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.712);
        }
    </style>

    <div class="navig" id="nav__1" onclick="location.href='education.html';">
        <img src="home.png">
        <p>Home</p>
    </div>
    <div class="navig" id="nav__2" onclick="location.href='submit_assignment.html';">
        <img src="assignment.png">
    </div>
    <div class="navig" id="nav__3" onclick="location.href='cbt-simulator-home.html';">
        <img src="cbt.png">
        <p>CBT<br>Practice</p>
    </div>
    <div class="navig" id="nav__4" onclick="location.href='cgpa_calculator.html';">
        <img src="cgpa.png">
        <p>CGPA<br>Calculator</p>
    </div>
</div>
</html>
