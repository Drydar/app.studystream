<!DOCTYPE html>
<html lang="en">
<head>
    <title>Withdrawal Section</title>
    <link rel="stylesheet" href="withdrawal.css">
</head>
<body>
<div class="container">
    <img src="streamplex.png">
    <h2>StreamPlex Withdrawal</h2>

    <div class="withdrawal-options">
        <button onclick="showForm('withdrawalForm')">Bank Withdrawal</button>
        <button onclick="showForm('airtimeForm')">Airtime Withdrawal</button>
        <button onclick="showForm('dataForm')">Data Withdrawal</button>
    </div>

    <div id="successPopup" class="popup">
        <p>Form submitted successfully!</p>
        <button onclick="closePopup()">OK</button>
    </div>

    <!-- Bank Form -->
    <form class="form-section" id="withdrawalForm" onsubmit="showPopup(event)">
        <h3>Bank Withdrawal</h3>

        <div style="text-align: left;">
            <p class="point">1 POINT = &#x20A6; 1</p>
            <p>Minimum withdrawal = 100points</p>
            <input type="text" name="uid" placeholder="User ID" required>

            <input type="text" name="bankName" placeholder="Bank Name" required>

            <input type="text" name="accountNumber" placeholder="Account Number" required>

            <input type="text" name="accountName" placeholder="Account Name (Name on the account)" required>

            <input type="number" name="amount" placeholder="Amount" required>
        </div>
        <button type="submit">Submit Request</button>
        <script>
            document.getElementById('withdrawalForm').addEventListener('submit', function(e) {
              e.preventDefault();
            
              let formData = new FormData(this);
              let jsonData = {};
              formData.forEach((value, key) => jsonData[key] = value);
                        
              fetch("https://script.google.com/macros/s/AKfycbxmye5dc86ke4uy5kaXKx0i83cR4WQAURFeA6_zcKSy48a2AfZ4gofzp8VevFIqZXLR2g/exec", {
                method: 'POST',
                headers: {"Content-Type":"application/json"},
                body: JSON.stringify(jsonData)
              })
              .then(res => res.text())
              .then(data => alert(data))
              .catch(err => console.error("Fetch Error:", err));
            });
            </script>
    </form>

        

    <!-- Airtime Form -->
    <form class="form-section" id="airtimeForm" onsubmit="showPopup(event)" action="https://formspree.io/f/xdkeozep" method="POST">
        <h3>Airtime Withdrawal</h3>
        <div style="text-align: left;">
            <p class="point">1 POINT = &#x20A6; 1</p>
            <label>Your UID</label>
            <input type="text" name="UID" required>

            <label>Network</label>
            <select name="Network" required class="custom-select">
                <option>MTN</option>
                <option>AIRTEL</option>
                <option>GLO</option>
                <option>9mobile</option>
            </select>

            <label>Phone Number</label>
            <input type="number" name="Phone Number" required>

            <label>Amount (points)</label>
            <input type="number" name="Amount" required>
        </div>
        <button type="submit">Submit Request</button>
    </form>

    <!-- Data Form -->
    <form class="form-section" id="dataForm" onsubmit="showPopup(event)" action="https://formspree.io/f/xdkeozep" method="POST">
        <h3>Data Withdrawal</h3>
        <div style="text-align: left;">
            <label>Your UID</label>
            <input type="text" name="UID" required>

            <label>Network</label>
            <select name="Network" required>
                <option>MTN</option>
                <option>Airtel</option>
                <option disabled>Glo</option>
                <option disabled>9mobile</option>
            </select>

            <label>Phone Number</label>
            <input type="text" name="Phone Number" required>

            <label>Data Package</label>
            <select name="Data Package" required>
                <option>350 points for 500MB</option>
                <option>700 points for 1GB</option>
                <option>1400 points for 2GB</option>
                <option>3500 points for 5GB</option>
            </select>
        </div>
        <button type="submit">Submit Request</button>
    </form>
</div>

<script>
    function showForm(formId) {
        const forms = document.querySelectorAll('.form-section');
        forms.forEach(form => {
            form.style.display = 'none';
            form.classList.remove('fade-in');
        });
        const form = document.getElementById(formId);
        form.style.display = 'block';
        setTimeout(() => form.classList.add('fade-in'), 50);
    }

    function showPopup(event) {
        event.preventDefault();
        document.getElementById('successPopup').style.display = 'flex';
        setTimeout(() => {
            event.target.submit();
        }, 1500); // Delay to show popup before submitting
    }

    function closePopup() {
        document.getElementById('successPopup').style.display = 'none';
    }
</script>

</body>
</html>